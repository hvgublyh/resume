---
title: 数据库对象
updated: 2019-08-02T10:14:39
created: 2019-08-01T09:09:01
---

数据库对象
2019年8月1日
9:09

一、数据库对象是数据库的组成部分，常常用create创建，alter修改，drop删除。

目前我们学习过的数据库对象有：user、table、sequence

今天我们要学习的数据库对象有

1）存储过程

2）触发器

3）视图

4）索引

5）表空间
二、存储过程
存储过程是为了完成特定功能的sql语句集，经编译后存储在数据库当中，用户通过给出存储过程名及参数就可以调用该存储过程。

1、存储过程的语法

create or replace procedure 存储过程名(变量名 in 变量类型，变量名 out 变量类型) as

变量声明部分

begin

sql 语句

end;

--创建一个统计students表中男女生人数的存储过程

create or replace procedure pro_count(sex in number,nums out number)

as

begin

select count(\*) into nums from students s where s.ssex= sex;

end;

--调用

declare n number;--定义变量

begin

pro_count(0,n);

dbms_output.put_line(n);

end;

--创建一个输入员工编号，输出收入的存储过程

create or replace procedure pro_saloutput(ecode in number,salary out number)

as

begin

select e.sal into salary from emp e where ecode=e.empno;

end;

--调用

declare sal number;

begin

pro_saloutput(7499,sal);

dbms_output.put_line(sal);

end;

三、触发器
触发器是一种特殊的存储过程。当特定事件发生时，由系统自动调用，不能由应用程序显式调用。

1、Oracle触发器分为DML触发器、替代触发器、系统触发器

1）DML触发器：当数据库中发生数据操纵语言事件时调用，包括对表、视图等的insert、update及delete操作。

2）替代触发器：Oracle中不能直接对由两个表以上建立的视图做操作，所以给出了替代触发器，专门做视图操作

3）系统触发器：主要针对系统的操作

--创建触发器

create or replace trigger tri_t1

after insert or update or delete --触发时机

on t1--针对t1表的触发器

declare info varchar2(40);

begin

if inserting then

info:='进行了插入操作';

elsif updating then

info:='进行了修改操作';

elsif deleting then

info:='进行了删除操作';

end if;

dbms_output.put_line(info);

end;

--对t1表做插入操作

insert into t1 values(3,4,5);

output:进行了插入操作

四、视图
视图是从一个或多个表中导出的表，其内容由查询定义。就本质而言，视图中的数据来源于所引用的表，所以视图不是真是存在的表，而是一张虚表，视图所对应的数据并不实际以视图结构存放在数据库中，而是存储在视图所引用的表中。

注意：创建视图需要有dba权限。

--创建员工视图

create or replace view emp_info

as

select e.empno,e.ename,e.job, d.deptno,d.dname,d.loc

from emp e,dept d where e.deptno=d.deptno

with read only;

注意：视图可以增删改，修改的是基表。
五、索引
索引就像书本里的目录，可以帮我们快速定位到想要查找的内容，如果表中的某些字段经常被执行操作，我们要在这些字段上加索引

create \[unique\] index index_name on

table_name (column_name\[,column_name…\])
六、表空间
七、事务
事务是数据库中的最小执行单元，通常由一条或N条sql语句组成。针对一个事务中的一条或N条sql语句，如果都执行成功则事务成功
